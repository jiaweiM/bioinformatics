# cp

- [cp](#cp)
  - [简介](#简介)
  - [选项](#选项)
  - [实例](#实例)

Last updated: 2023-04-12, 14:10
*****

## 简介

`cp` (copy) 命令用于复制文件或目录。

```sh
cp [选项] 源文件 目标文件
```

主要有两种用法：

1. 将单个文件或目录 item1 复制到 item2

```bash
cp item1 item2
```

2. 将多个文件或目录 item 复制到目录 directory

```bash
cp item... directory
```

## 选项

- `-a`, `--archive`

复制时保留属性，包括权限。通常情况下，副本采用执行复制操作用户的默认属性。等价于 "pdr" 选项。

- `-i`, `--interactive`

若目标文件已存在，询问是否覆盖。默认覆盖文件。

- `-r`, `--recursive`

递归复制目录及其内容，复制目录时需要该选项（或 `-a` 选项）。

- `-u`, `--update`

把文件从一个目录复制到目标目录时，仅复制目标目录中不存在的文件，或者是文件内容新于目标目录中已经存在的文件。该选项在复制大批文件时很实用，因为它能够跳过那些不必复制的文件。

- `-v`, `--verbose`

详细显示命令执行信息。

|短选项|长选项|说明|
|---|---|---|
|-f||若目标文件已存在，则会直接覆盖原文件|
|`-p`||保留源文件或目录的所有属性|
|`-d`||当复制符号连接时，把目标文件或目录也建立为符号连接，并指向与源文件或目录连接的原始文件或目录|
|-l||对源文件建立硬连接，而非复制文件|
|-s||对源文件建立符号连接，而非复制文件|
|-b||覆盖已存在的文件目标前将目标文件备份|


## 实例

- 复制文件

```sh
$ cp file1 file2
```

将文件 file1 复制为文件 file2。如果文件 file2 存在，则实用 file1 的内容将其**覆盖**。如果文件 file2 不存在，则创建文件 file2.

- 复制单个文件——提示

```bash
cp -i file1 file2
```

和上面的命令一样，除了如果文件 file2 存在的话，在文件 file2 被重写之前，会提示用户确认信息。输入 `y` 确认操作。

- 将文件复制到 `/etc` 目录，并覆盖已有文件

```sh
cp -f ks.cfg /etc
```

- 复制多个文件

```bash
cp file1 file2 dir1
```

复制文件 file1 和文件 file2 到目录 dir1。目录 dir1 必须存在。

- 通用符

```bash
cp dir1/* dir2
```

使用通配符将目录 dir1 中的所有文件都被复制到目录 dir2 中。dir2 必须存在。

- 复制目录

```bash
cp -r dir1 dir2
```

复制目录 dir1 中的内容到目录 dir2。如果目录 dir2 不存在，创建目录 dir2，操作完成后，目录 dir2 中的内容和 dir1 中的一样。如果目录 dir2 存在，则目录 dir1 (和目录中的内容) 将会被复制到 dir2 中。
